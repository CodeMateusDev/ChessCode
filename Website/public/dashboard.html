<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="assets/styles/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>

</head>

<body>
    <aside>
        <ul>
            <div class="vindo">
                <p>Bem-vindo</p>
                <span id="span_nome"></span>
            </div>
            <button id="selecionado" class="select-aside" onclick="window.location = 'dashboard.html'">
                <svg width="72" height="70" viewBox="0 0 72 70" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M39.7855 4.83419C40.3422 4.91994 40.709 5.45591 40.5979 6.00806L34.8572 34.5306C34.728 35.173 35.2411 35.764 35.8952 35.7263L64.7636 34.06C65.3298 34.0273 65.8108 34.4721 65.8125 35.0393C65.8417 44.6672 63.5417 52.56 56.3006 59.8012C43.6016 72.5002 22.8006 72.5002 10.1986 59.8012C-2.50043 47.1022 -2.50043 26.3012 10.1986 13.6992C18.7418 5.06122 28.6029 3.11165 39.7855 4.83419ZM70.3056 32.1577C70.8557 32.1269 71.2782 31.6528 71.2379 31.1033C70.0512 14.905 61.0384 4.45789 45.084 0.908007C44.5449 0.788053 44.0134 1.13888 43.9044 1.68032L37.6539 32.7328C37.5248 33.3745 38.0367 33.9652 38.6902 33.9286L70.3056 32.1577ZM48.3284 5.80594C47.7763 5.62939 47.2031 5.98262 47.0881 6.55075L42.6585 28.4338C42.5288 29.0745 43.0386 29.6653 43.6914 29.6308L65.9336 28.4546C66.511 28.424 66.944 27.911 66.8526 27.3401C65.2395 17.2688 57.9771 8.89132 48.3284 5.80594ZM12.9998 16.5C1.89777 27.602 1.89777 45.898 12.9998 57C24.1018 68.102 42.3008 68.102 53.3978 57C57.9569 52.4408 61.0716 46.2616 61.6313 39.398C61.6792 38.8106 61.1899 38.3279 60.6013 38.359L30.8889 39.9319C30.2363 39.9665 29.7265 39.3761 29.8558 38.7355L35.7789 9.39159C35.8964 8.80905 35.4826 8.25166 34.8893 8.21822C26.6868 7.75599 18.8389 10.6613 12.9998 16.5Z"
                        fill="white" />
                </svg>

                <div class="caixa">
                    <p>Dashboard</p>
                </div>
            </button>

            <button class="select-aside" onclick="window.location = 'quizDash.html'">
                <svg width="97" height="98" viewBox="0 0 97 98" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M91.75 42.75V13.062C91.75 10.9917 90.9258 9.00341 89.4609 7.53861C87.9961 6.07381 86.0078 5.24951 83.9375 5.24951H54.2495C51.7886 5.24951 49.4761 6.40571 47.9995 8.37451C46.5229 6.40571 44.2104 5.24951 41.7495 5.24951H12.0615C7.74512 5.24951 4.24902 8.74561 4.24902 13.062V42.75C4.24902 45.2109 5.40522 47.5234 7.37402 49C5.40522 50.4766 4.24902 52.7891 4.24902 55.25V84.938C4.24902 87.0083 5.07324 88.9966 6.53812 90.4614C8.00292 91.9262 9.99122 92.7505 12.0615 92.7505H41.7495C44.2104 92.7505 46.5229 91.5943 47.9995 89.6255C49.4761 91.5943 51.7886 92.7505 54.2495 92.7505H83.9375C86.0078 92.7505 87.9961 91.9263 89.4609 90.4614C90.9257 88.9966 91.75 87.0083 91.75 84.938V55.25C91.75 52.7891 90.5938 50.4766 88.625 49C90.5938 47.5234 91.75 45.2109 91.75 42.75ZM49.562 49C48.9683 49.4414 48.4409 49.9688 47.9995 50.5625C47.5581 49.9688 47.0308 49.4414 46.437 49C47.0308 48.5586 47.5581 48.0313 47.9995 47.4375C48.4409 48.0313 48.9683 48.5586 49.562 49ZM7.37402 42.75V13.062C7.37402 10.4722 9.47172 8.37451 12.0615 8.37451H41.7495C42.9995 8.34717 44.2065 8.83545 45.0933 9.71831C45.9761 10.605 46.4644 11.8121 46.4371 13.0621V43.1401C46.234 45.5737 44.1949 47.4448 41.7496 47.437H12.0616C9.47182 47.437 7.37402 45.3398 7.37402 42.75ZM41.749 89.625H12.061C9.47122 89.625 7.37352 87.5273 7.37352 84.9375V55.2495C7.37352 52.6597 9.47122 50.562 12.061 50.562H41.749C44.2021 50.5542 46.249 52.4409 46.4365 54.8901V84.9681C46.46 86.2142 45.9717 87.4173 45.0849 88.2962C44.2021 89.1751 42.9951 89.6563 41.749 89.625ZM88.624 55.25V84.938C88.624 87.5278 86.5263 89.6255 83.9365 89.6255H54.2485C52.9985 89.6529 51.7915 89.1646 50.9047 88.2817C50.0219 87.395 49.5336 86.1879 49.5609 84.9379V54.8599C49.764 52.4263 51.8031 50.5552 54.2484 50.563H83.9364C86.5262 50.563 88.624 52.6602 88.624 55.25ZM88.624 42.75C88.624 45.3398 86.5263 47.4375 83.9365 47.4375H54.2485C51.7954 47.4453 49.7485 45.5586 49.561 43.1094V13.0624C49.5298 11.8085 50.0141 10.6015 50.9008 9.71471C51.7875 8.82799 52.9946 8.34361 54.2485 8.37491H83.9365C86.5263 8.37491 88.624 10.4726 88.624 13.0624V42.75Z"
                        fill="black" />
                    <path
                        d="M81.0781 20.6411C81.0507 18.7388 79.8984 17.0356 78.1445 16.3091C76.3867 15.5786 74.3672 15.9614 73 17.2818L69.0938 21.188L65.1876 17.2818C63.3321 15.4263 60.3243 15.4263 58.4688 17.2818C56.6133 19.1373 56.6133 22.1451 58.4688 24.0006L62.3907 27.9225L58.4688 31.8131C56.625 33.6686 56.6368 36.6647 58.4922 38.5084C60.3477 40.3522 63.3438 40.3404 65.1875 38.4849L69.1094 34.5787L73 38.5006C74.8477 40.3483 77.8398 40.3483 79.6875 38.5006C81.5352 36.6529 81.5352 33.6608 79.6875 31.8131L75.7656 27.8912L79.6875 24.0006C80.5742 23.1061 81.0703 21.8989 81.0781 20.6411ZM77.4687 21.7661L72.4531 26.7817C71.8476 27.3911 71.8476 28.3755 72.4531 28.9848L77.4843 34.016C77.9999 34.4535 78.1757 35.1722 77.9218 35.8012C77.664 36.4262 77.0351 36.8168 76.3593 36.766C75.9218 36.7739 75.5038 36.5981 75.2031 36.2817L70.1875 31.2661C69.8945 30.9692 69.4961 30.7973 69.0781 30.7973C68.6601 30.7973 68.2617 30.9692 67.9687 31.2661L62.9531 36.2817C62.3242 36.9106 61.3008 36.9106 60.6719 36.2817C60.043 35.6528 60.043 34.6294 60.6719 34.0005L65.7031 28.9849C66.3085 28.3755 66.3085 27.3911 65.7031 26.7818L60.6875 21.7662C60.0586 21.1412 60.0547 20.1217 60.6797 19.4928C61.3047 18.8639 62.3242 18.86 62.9531 19.4849L67.9687 24.5005C68.2616 24.7974 68.6601 24.9615 69.0781 24.9615C69.4961 24.9615 69.8945 24.7974 70.1875 24.5005L75.2031 19.4849C75.832 18.8599 76.8515 18.8639 77.4765 19.4928C78.1015 20.1217 78.0976 21.1411 77.4687 21.7661Z"
                        fill="black" />
                    <path
                        d="M62.3912 70.109L58.4693 73.9996C56.6138 75.8551 56.6138 78.8629 58.4693 80.7184C60.3248 82.5739 63.3326 82.5739 65.1881 80.7184L69.11 76.7965L73.0006 80.7184C74.8561 82.5661 77.8561 82.5582 79.7037 80.7027C81.5513 78.8473 81.5435 75.8472 79.688 73.9996L75.7661 70.0777L79.688 66.1871C80.5865 65.3043 81.0903 64.1012 81.0903 62.8433C81.0903 61.5854 80.5864 60.3824 79.688 59.4995C77.813 57.7026 74.8599 57.7026 72.9849 59.4995L69.0787 63.4214L65.1881 59.4995C63.3404 57.644 60.3404 57.6362 58.485 59.4839C56.6296 61.3316 56.6217 64.3316 58.4694 66.187L62.3912 70.109ZM60.6724 61.7184C60.9692 61.402 61.3794 61.2223 61.813 61.2223C62.2465 61.2223 62.6567 61.402 62.9536 61.7184L67.9692 66.734C68.2621 67.0308 68.6606 67.1949 69.0786 67.1949C69.4966 67.1949 69.895 67.0308 70.188 66.734L75.2036 61.7184C75.645 61.1949 76.3755 61.0191 77.0044 61.2848C77.6333 61.5504 78.02 62.1949 77.9536 62.8746C77.9497 63.2925 77.7739 63.6949 77.4692 63.984L72.4536 68.9996C72.1606 69.2925 71.9966 69.6949 72.0005 70.109C71.9966 70.523 72.1606 70.9254 72.4536 71.2184L77.4848 76.234C77.8012 76.5309 77.9809 76.941 77.9809 77.3746C77.9809 77.8081 77.8012 78.2183 77.4848 78.5152C77.1879 78.8238 76.7817 79.0035 76.352 79.0035C75.9223 79.0035 75.5161 78.8238 75.2192 78.5152L70.188 73.484C69.895 73.1871 69.4966 73.023 69.0786 73.023C68.6606 73.023 68.2622 73.1871 67.9692 73.484L62.9536 78.4996C62.3286 79.1285 61.3091 79.1324 60.6802 78.5074C60.0513 77.8824 60.0474 76.8629 60.6724 76.234L65.7036 71.2184C66.0005 70.9254 66.1645 70.527 66.1645 70.109C66.1645 69.691 66.0005 69.2926 65.7036 68.9996L60.6724 63.984C60.3638 63.6871 60.1841 63.2809 60.1841 62.8512C60.1841 62.4215 60.3638 62.0152 60.6724 61.7184Z"
                        fill="black" />
                    <path
                        d="M38.9219 62.8751C38.8985 60.9649 37.7422 59.254 35.9766 58.5196C34.2149 57.7852 32.1836 58.1719 30.8125 59.5L26.8906 63.4219L23 59.5C21.1523 57.6523 18.1602 57.6523 16.3125 59.5C14.4648 61.3477 14.4648 64.3398 16.3125 66.1875L20.2344 70.1094L16.3125 74C15.4219 74.8868 14.918 76.0898 14.918 77.3477C14.9141 78.6055 15.4102 79.8125 16.2969 80.7032C18.1446 82.5587 21.1446 82.5665 23 80.7189L26.9062 76.797L30.8124 80.7189C32.6679 82.5744 35.6757 82.5744 37.5312 80.7189C39.3867 78.8634 39.3867 75.8556 37.5312 74.0001L33.6093 70.0782L37.5312 66.1876C38.4179 65.3126 38.918 64.1212 38.9219 62.8751ZM35.3125 63.9845L30.2969 69.0001C30.0039 69.293 29.8399 69.6954 29.8438 70.1095C29.8399 70.5235 30.0039 70.9259 30.2969 71.2189L35.3281 76.2345C35.957 76.8595 35.9609 77.879 35.3359 78.5079C34.7109 79.1368 33.6914 79.1407 33.0625 78.5157L28.0313 73.4845C27.7383 73.1915 27.336 73.0274 26.9219 73.0314C26.5078 73.0275 26.1055 73.1915 25.8125 73.4845L20.7969 78.5001C20.5 78.8126 20.086 78.9884 19.6563 78.9845C18.9805 79.0352 18.3516 78.6446 18.0938 78.0196C17.8399 77.3907 18.0157 76.6719 18.5313 76.2344L23.5469 71.2188C23.8399 70.9258 24.0039 70.5235 24 70.1094C24.0039 69.6954 23.8399 69.293 23.5469 69L18.5313 63.9844C17.9063 63.3594 17.9063 62.3438 18.5313 61.7188C19.1563 61.0938 20.1719 61.0938 20.7969 61.7188L25.8125 66.7344C26.1055 67.0313 26.5039 67.1954 26.9219 67.1954C27.3399 67.1954 27.7383 67.0313 28.0313 66.7344L33.0469 61.7188C33.3477 61.418 33.7539 61.2501 34.1797 61.2501C34.6055 61.2501 35.0117 61.418 35.3125 61.7188C35.9375 62.3438 35.9375 63.3595 35.3125 63.9845Z"
                        fill="black" />
                    <path
                        d="M40.6409 17.75C38.7307 15.8672 35.6604 15.8672 33.7503 17.75L23.5943 27.797L20.4693 24.547C18.5123 22.5626 15.3131 22.5431 13.3287 24.5001C11.3443 26.4571 11.3248 29.6563 13.2819 31.6407L19.3913 37.7657C20.5085 38.8907 22.0319 39.5274 23.6179 39.5274C25.2038 39.5274 26.7272 38.8907 27.8444 37.7657L40.7194 24.6717C42.6022 22.7381 42.5667 19.6407 40.6409 17.75ZM38.4378 22.4375L25.5788 35.5315C24.4694 36.637 22.6726 36.637 21.5632 35.5315L15.4538 29.4065C14.7077 28.6526 14.7155 27.4338 15.4694 26.6877C16.2234 25.9416 17.4422 25.9494 18.1883 26.7033L22.0633 30.6721C22.4578 31.0745 23.0008 31.2971 23.5633 31.2971C24.1258 31.2971 24.6688 31.0745 25.0633 30.6721L36.0012 19.9221C36.7122 19.3909 37.7083 19.469 38.3294 20.1057C38.9465 20.7463 38.9925 21.7422 38.4378 22.4375Z"
                        fill="black" />
                </svg>
                <div class="caixa">
                    <p>Dash Quizzes</p>
                </div>
            </button>

            <button class="select-aside" onclick="window.location = 'cadastroADM.html'">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 328 328" xml:space="preserve">
                    <g id="XMLID_455_">
                        <path id="XMLID_458_"
                            d="M15,286.75h125.596c19.246,24.348,49.031,40,82.404,40c57.897,0,105-47.103,105-105s-47.103-105-105-105 c-34.488,0-65.145,16.716-84.298,42.47c-7.763-1.628-15.694-2.47-23.702-2.47c-63.411,0-115,51.589-115,115 C0,280.034,6.716,286.75,15,286.75z M223,146.75c41.355,0,75,33.645,75,75s-33.645,75-75,75s-75-33.645-75-75 S181.645,146.75,223,146.75z" />
                        <path id="XMLID_461_"
                            d="M115,1.25c-34.602,0-62.751,28.15-62.751,62.751S80.398,126.75,115,126.75 c34.601,0,62.75-28.148,62.75-62.749S149.601,1.25,115,1.25z" />
                        <path id="XMLID_462_"
                            d="M193,236.75h15v15c0,8.284,6.716,15,15,15s15-6.716,15-15v-15h15c8.284,0,15-6.716,15-15s-6.716-15-15-15 h-15v-15c0-8.284-6.716-15-15-15s-15,6.716-15,15v15h-15c-8.284,0-15,6.716-15,15S184.716,236.75,193,236.75z" />
                    </g>
                </svg>
                <div class="caixa">
                    <p>Novo ADM</p>
                </div>
            </button>

            <button class="select-aside" onclick="window.location = 'index.html'">
                <svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">

                    <g id="SVGRepo_bgCarrier" stroke-width="0" />

                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />

                    <g id="SVGRepo_iconCarrier">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M9.70725 2.4087C9 3.03569 9 4.18259 9 6.4764V17.5236C9 19.8174 9 20.9643 9.70725 21.5913C10.4145 22.2183 11.4955 22.0297 13.6576 21.6526L15.9864 21.2465C18.3809 20.8288 19.5781 20.62 20.2891 19.7417C21 18.8635 21 17.5933 21 15.0529V8.94711C21 6.40671 21 5.13652 20.2891 4.25826C19.5781 3.37999 18.3809 3.17118 15.9864 2.75354L13.6576 2.34736C11.4955 1.97026 10.4145 1.78171 9.70725 2.4087ZM12 10.1686C12.4142 10.1686 12.75 10.52 12.75 10.9535V13.0465C12.75 13.48 12.4142 13.8314 12 13.8314C11.5858 13.8314 11.25 13.48 11.25 13.0465V10.9535C11.25 10.52 11.5858 10.1686 12 10.1686Z"
                            fill="#000" />
                        <path
                            d="M7.54717 4.5C5.48889 4.503 4.41599 4.54826 3.73223 5.23202C3 5.96425 3 7.14276 3 9.49979V14.4998C3 16.8568 3 18.0353 3.73223 18.7676C4.41599 19.4513 5.48889 19.4966 7.54717 19.4996C7.49985 18.8763 7.49992 18.1557 7.50001 17.3768V6.6227C7.49992 5.84388 7.49985 5.1233 7.54717 4.5Z"
                            fill="#000" />
                    </g>
                </svg>
                <div class="caixa">
                    <p>Sair</p>
                </div>
            </button>
        </ul>
    </aside>
    <main id="Maindashboard" class="Maindashboard">
        <div class="graficos">
            <div class="linha">
                <div class="caixas_grafico">
                    <canvas class="VizuGrafico" id="Graficopublico"></canvas>
                    <div class="textoGrafico">
                        <div class="masculino">
                            <p>Masculino</p>
                            <span id="qnt_masculino">2</span>
                        </div>
                        <div class="feminino">
                            <p>Feminino</p>
                            <span id="qnt_feminino">3</span>
                        </div>
                    </div>
                </div>

                <div class="caixas_grafico">
                    <canvas class="VizuGrafico" id="GraficofezQuiz"></canvas>
                    <div class="textoGrafico">
                        <div class="realizou">
                            <p>Realizou</p>
                            <span id="qnt_responderam">10</span>
                        </div>
                        <div class="naoRealizou">
                            <p>Não realizou</p>
                            <span id="qnt_nao_responderam">20</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="linha">
                <div class="caixas_grafico">
                    <canvas class="graficoLinha" id="GraficoQntQuiz"></canvas>
                </div>
                <div class="caixas_grafico">
                    <canvas class="graficoLinha" id="Graficonivel"></canvas>
                </div>
            </div>
        </div>
        <nav class="kpis">

            <div class="kpi">
                <p>Total de Usuários</p>
                <span class="dados" id="span_usuarios"></span>
            </div>

            <div class="kpi">
                <p>Quizzes Respondidos</p>
                <span class="dados" id="span_quizzes"></span>
            </div>

            <div class="kpi">
                <p>Quiz Mais Popular</p>
                <span class="dados" id="span_popular"></span>
            </div>

            <div class="kpi">
                <p>Idade Média</p>
                <span class="dados" id="span_media"></span>
            </div>

        </nav>
    </main>
</body>

</html>

<script>
    var nome = sessionStorage.NOME_USUARIO

    window.onload = () => {
        buscarUsuarios()
        buscarQuizzes()
        buscarQuizPopular()
        buscarMedia()

        buscarPublico()
        buscarRealizacoes()
        buscarQuantidadeQuiz()
        buscarQuantidadeNivel()

        setInterval(buscarUsuarios, 1000)
        setInterval(buscarQuizzes, 1000)
        setInterval(buscarQuizPopular, 1000)
        setInterval(buscarMedia, 1000)

        setInterval(buscarPublico, 1000)
        setInterval(buscarRealizacoes, 1000)
        setInterval(buscarQuantidadeQuiz, 1000)
        setInterval(buscarQuantidadeNivel, 1000)

        span_nome.innerHTML = nome
    }


    // variaveis globais para a dashboard
    var usuariosTotais = 0

    var feminino = 0.1;
    var masculino = 0.1;

    var realizou = 0.1;
    var naoRealizou = 1.1;

    var QntQuiz1 = 0.1;
    var QntQuiz2 = 0.1;
    var QntQuiz3 = 0.1;

    var iniciante = 0.1
    var intermediario = 0.1
    var experiente = 0.1


    //BUSCA DE DADOS DAS KPIs
    function buscarUsuarios() {
        fetch(`/dashboard/listarUsuarios`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar usuarios");
                }
                return response.json();
            })

            .then(dashs => {
                const dadoUsuario = document.getElementById("span_usuarios");
                usuarios = dadoUsuario
                dadoUsuario.innerHTML = "";

                dashs.forEach(dados => {

                    usuariosTotais = dados.usuarios
                    dadoUsuario.innerHTML = dados.usuarios
                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });
    }

    function buscarQuizzes() {
        fetch(`/dashboard/listarQuizzes`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar sensores");
                }
                return response.json();
            })

            .then(dashs => {
                const dadosQuizzes = document.getElementById("span_quizzes");
                dadosQuizzes.innerHTML = "";

                dashs.forEach(dados => {
                    dadosQuizzes.innerHTML += `${dados.quizzes}`
                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });
    }

    function buscarQuizPopular() {
        fetch(`/dashboard/listarQuizPopular`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar sensores");
                }
                return response.json();
            })

            .then(dashs => {
                const dadosPopular = document.getElementById("span_popular");
                dadosPopular.innerHTML = "";

                dashs.forEach(dados => {
                    dadosPopular.innerHTML += `${dados.idQuiz}`
                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });
    }

    function buscarMedia() {
        fetch(`/dashboard/listarMedia`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar sensores");
                }
                return response.json();
            })

            .then(dashs => {
                const dadosMedia = document.getElementById("span_media");
                dadosMedia.innerHTML = "";

                dashs.forEach(dados => {
                    dadosMedia.innerHTML += `${dados.media}`
                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });
    }






    //BUSCA DE DADOS DOS GRÁFICOS

    const Graficopublico = document.getElementById('Graficopublico');
    const Publico = new Chart(Graficopublico, {
        type: 'pie',
        data: {
            labels: false,
            datasets: [{
                label: `Sexo: `,
                data: [masculino, feminino],
                backgroundColor: ['#3498db', 'rgb(255, 37, 168)'],
                borderWidth: 0
            }]
        },
        options: {
            responsive: false,
            plugins: {
                datalabels: {
                    color: '#fff',
                    font: {
                        weight: 'bold',
                        size: 14
                    },
                    formatter: (value) => `${value}%`
                },
                title: {
                    display: true,
                    text: 'Porcentagem de público',
                    color: 'black',
                    font: {
                        size: 18
                    }
                }
            }
        },
        plugins: [ChartDataLabels]
    });


    function buscarPublico() {
        fetch(`/dashboard/listarFeminino`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar feminino");
                }
                return response.json();
            })
            .then(dashs => {
                dashs.forEach(dados => {
                    feminino = dados.feminino
                    qnt_feminino.innerHTML = feminino

                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });

        fetch(`/dashboard/listarMasculino`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar masculino");
                }
                return response.json();
            })
            .then(dashs => {
                dashs.forEach(dados => {
                    masculino = dados.masculino
                    qnt_masculino.innerHTML = masculino
                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });

        var total = masculino + feminino
        var porcentagemMasculino = ((masculino / total) * 100).toFixed(2)
        var porcentagemFeminino = ((feminino / total) * 100).toFixed(2)

        Publico.data.datasets[0].data = [porcentagemMasculino, porcentagemFeminino];
        Publico.update();
    }

    const GraficoQuiz = document.getElementById('GraficofezQuiz');
    const Quiz = new Chart(GraficoQuiz, {
        type: 'pie',
        data: {
            labels: false,
            datasets: [{
                label: 'Fez Quiz',
                data: [realizou, naoRealizou],
                backgroundColor: ['#2ecc71', '#e74c3c'],
                borderWidth: 0
            }]
        },
        options: {
            responsive: false,
            plugins: {
                datalabels: {
                    color: '#fff',
                    font: {
                        weight: 'bold',
                        size: 14
                    },
                    formatter: (value) => `${value}%`
                },
                legend: {
                    display: true,
                    position: 'top'
                },
                title: {
                    display: true,
                    text: 'Participação dos usuários no quiz',
                    color: 'black',
                    font: {
                        size: 18
                    }
                }
            }
        },
        plugins: [ChartDataLabels]
    });


    function buscarRealizacoes() {
        fetch(`/dashboard/listarQntFeitos`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar realizados");
                }
                return response.json();
            })
            .then(dashs => {
                dashs.forEach(dados => {
                    realizou = dados.realizados;
                    qnt_responderam.innerHTML = realizou

                    naoRealizou = (usuariosTotais) - (dados.realizados)
                    qnt_nao_responderam.innerHTML = naoRealizou

                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });

        var total = realizou + naoRealizou
        var porcentagemRealizou = ((realizou / total) * 100).toFixed(2)
        var porcentagemNaoRealizou = ((naoRealizou / total) * 100).toFixed(2)

        Quiz.data.datasets[0].data = [porcentagemRealizou, porcentagemNaoRealizou];
        Quiz.update();
    }

    const Graficonivel = document.getElementById('Graficonivel').getContext('2d');
    const QntNivel = new Chart(Graficonivel, {
        type: 'bar',
        data: {
            labels: ['Experiente', 'Intermédiario', 'Iniciante'],
            datasets: [{
                data: [10, 20, 15],
                borderRadius: 5,
                backgroundColor: ['#3498db', '#2ecc71', '#e74c3c']
            }]
        },
        options: {
            responsive: false,
            plugins: {
                datalabels: {
                    color: '#fff',
                    font: {
                        weight: 'bold',
                        size: 14
                    },
                    formatter: (value) => `${value}`
                },
                legend: {
                    display: false
                },
                title: {
                    display: true,
                    text: 'Quantidade de cada nível de usuario',
                    font: {
                        size: 18
                    }
                }
            },
            scales: {
                y: {
                    grid: {
                        display: true
                    },
                    ticks: {
                        stepSize: 1
                    }
                },
                x: {
                    grid: {
                        display: false
                    }
                }
            }
        },
        plugins: [ChartDataLabels]
    });

    function buscarQuantidadeNivel() {
        fetch(`/dashboard/listarIniciante`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar quiz1");
                }
                return response.json();
            })
            .then(dashs => {
                dashs.forEach(dados => {
                    iniciante = dados.iniciante
                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });

        fetch(`/dashboard/listarIntermediario`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar quiz1");
                }
                return response.json();
            })
            .then(dashs => {
                dashs.forEach(dados => {
                    intermediario = dados.intermediario
                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });

        fetch(`/dashboard/listarExperiente`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar quiz1");
                }
                return response.json();
            })
            .then(dashs => {
                dashs.forEach(dados => {
                    experiente = dados.experiente
                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });

        QntNivel.data.datasets[0].data = [experiente, intermediario, iniciante];
        QntNivel.update();
    }



    const GraficoQntQuiz = document.getElementById('GraficoQntQuiz').getContext('2d');
    const QntQuiz = new Chart(GraficoQntQuiz, {
        type: 'bar',
        data: {
            labels: ['Quiz 1', 'Quiz 2', 'Quiz 3'],
            datasets: [{
                borderRadius: 5,
                data: [QntQuiz1, QntQuiz1, QntQuiz1],
                backgroundColor: ['#3498db', '#2ecc71', '#e74c3c']
            }]
        },
        options: {
            responsive: false,
            plugins: {
                datalabels: {
                    color: '#fff',
                    font: {
                        weight: 'bold',
                        size: 14
                    },
                    formatter: (value) => `${value}`
                },
                legend: {
                    display: false
                },
                title: {
                    display: true,
                    text: 'Quantidade de realização de cada Quiz por usúario',
                    font: {
                        size: 18
                    }
                }
            },
            scales: {
                y: {
                    grid: {
                        display: true
                    },
                    ticks: {
                        stepSize: 1
                    }
                },
                x: {
                    grid: {
                        display: false
                    }
                }
            }
        },
        plugins: [ChartDataLabels]
    });

    function buscarQuantidadeQuiz() {
        fetch(`/dashboard/listarQuiz1`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar quiz1");
                }
                return response.json();
            })
            .then(dashs => {
                dashs.forEach(dados => {
                    QntQuiz1 = dados.QntQuiz1
                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });

        fetch(`/dashboard/listarQuiz2`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar quiz1");
                }
                return response.json();
            })
            .then(dashs => {
                dashs.forEach(dados => {
                    QntQuiz2 = dados.QntQuiz2
                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });

        fetch(`/dashboard/listarQuiz3`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar quiz1");
                }
                return response.json();
            })
            .then(dashs => {
                dashs.forEach(dados => {
                    QntQuiz3 = dados.QntQuiz3
                });
            })
            .catch(error => {
                console.error("Erro ao buscar dados:", error);
            });

        QntQuiz.data.datasets[0].data = [QntQuiz1, QntQuiz2, QntQuiz3];
        QntQuiz.update();
    }


</script>