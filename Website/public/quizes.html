<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemplo - Quiz</title>
    <link rel="stylesheet" href="assets/styles/quizes.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
</head>


<body onload="onloadEsconder()">
    <aside>
        <ul>
            <img id="logo" src="assets/img/LOGO.svg" alt="">

            <button class="select-aside" id="quiz1" onclick="iniciarQuiz(listaDeQuestoes1, 'quiz2', 'quiz3', 1)">
                <svg width="68" height="84" viewBox="0 0 68 84" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M54.832 47.3591V64.6711C54.8632 64.1203 55.1328 62.8352 56.9218 62.8352C62.6718 62.8352 67.3318 67.4914 67.3318 73.2412V73.249C67.3318 79.0029 62.6677 83.667 56.9138 83.667C55.7654 83.667 54.8318 82.7334 54.8318 81.585H13.1638C13.1638 82.7334 12.2302 83.667 11.0818 83.667C5.32787 83.667 0.663773 79.0029 0.663773 73.249V73.2412C0.663773 67.4912 5.32397 62.8352 11.0738 62.8352C12.8668 62.8352 13.1324 64.1243 13.1636 64.6711V54.4991C13.1636 53.9444 13.3862 53.4171 13.773 53.0225L16.4683 50.3311L13.773 47.6397C13.3862 47.2491 13.1636 46.7178 13.1636 46.1631V19.0811C13.1636 20.2295 12.23 21.1631 11.0816 21.1631C5.32767 21.1631 0.663574 16.499 0.663574 10.7451V10.7373C0.663574 4.9873 5.32377 0.331299 11.0736 0.331299C13.3588 0.331299 13.1634 2.4133 13.1634 2.4133H54.8314C54.8314 2.4133 54.64 0.331299 56.9212 0.331299C57.136 0.331299 57.3509 0.339111 57.5618 0.350829C63.011 0.678959 67.3274 5.20633 67.3274 10.7378V10.7456C67.3274 16.4995 62.6633 21.1636 56.9094 21.1636C55.761 21.1636 54.8274 20.2301 54.8274 19.0816V21.1636C54.8274 21.8433 54.4993 22.48 53.9407 22.8667L50.4368 25.3276L53.9407 27.7885C54.1711 27.9448 54.3586 28.1479 54.5032 28.3706C51.3391 28.7885 48.3821 30.2339 46.097 32.5151C41.6439 36.9643 36.4408 42.1753 32.835 45.7771C31.2725 47.3396 30.3936 49.4607 30.3936 51.6677C30.3936 53.1716 30.7959 54.6286 31.5459 55.9021L26.9404 60.5115C26.124 61.324 26.124 62.6443 26.9404 63.4568C27.7529 64.2693 29.0732 64.2693 29.8857 63.4568L34.4912 58.8474C35.7607 59.6013 37.2256 60.0036 38.7256 60.0036C40.9326 60.0036 43.0498 59.1286 44.6123 57.5661C46.8232 55.3552 49.0381 53.1403 49.0381 53.1403C49.4287 52.7497 49.6474 52.2184 49.6474 51.6637V47.8551H53.4599C53.9639 47.8551 54.4482 47.6715 54.8272 47.3434L54.832 47.3591ZM13.164 69.0861V77.4181H54.832V69.0861H13.164ZM62.152 34.1521L52.5973 43.7068H47.57C46.4216 43.7068 45.488 44.6404 45.488 45.7888V50.8161L41.6755 54.6325C40.8981 55.4099 39.8396 55.8473 38.7341 55.8473C37.6286 55.8473 36.5739 55.4098 35.7927 54.6325C35.7927 54.6286 35.7888 54.6286 35.7888 54.6247C35.0036 53.8474 34.5661 52.7849 34.5661 51.6794C34.5661 50.5739 35.0036 49.5153 35.7888 48.7341L49.0508 35.4721C51.0039 33.519 53.6524 32.4213 56.4141 32.4213C58.4727 32.4213 60.4688 33.0307 62.1563 34.1518L62.152 34.1521ZM54.8317 14.9181V6.58611H13.1637V14.9181H54.8317Z"
                        fill="white" />
                </svg>
                <div class="caixa">
                    <p>Quiz 1</p>
                </div>
            </button>

            <button class="select-aside" id="quiz2" onclick="iniciarQuiz(listaDeQuestoes2,'quiz1','quiz3',2)">
                <svg width="96" height="94" viewBox="0 0 96 94" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M46.5 75.9L38 72.6C31.2 69.9 26.7 63.4 26.7 56V50.7C26.7 43.4 32.4 37.5 39.6 37.1C41 34.3 43.8 32.3 47.2 32.3C48.1 29.6 48.8 26.6 49.1 22.9C50.3 2.1 30.8 0.6 25.4 0.5C24.7 0.5 24.2 1.2 24.4 1.9L26 7.9C26 7.9 20 8.2 16.8 14.7C13.7 21.1 4.8 23.8 3.3 27.7C1.9 31.7 5.1 37.1 7.3 37.9C10.5 38.9 19.4 32.8 21.8 31.9C24.2 30.9 24.8 33.1 12.5 48.6C1.8 62.1 10.2 68.2 12.5 69.6H9.6C4.5 69.6 0.5 73.6 0.5 78.6V83.4C0.5 84.3 1.2 84.9 2 84.9H44.8C45.9 82.4 48.1 80.4 50.9 79.7C48.7 77.8 47.3 76.7 46.5 75.9ZM22.1 16.8C22.1 15 23.6 13.5 25.4 13.5C27.3 13.5 28.8 15 28.8 16.8C28.8 18.7 27.3 20.1 25.4 20.1C23.6 20.1 22.1 18.7 22.1 16.8Z"
                        fill="white" />
                    <path
                        d="M87.8998 43.0999H83.4998V40.9C83.4998 39.4 82.2998 38.2 80.7998 38.2H47.4998C45.9998 38.2 44.7998 39.4 44.7998 40.9V43.0999H40.3998C36.1998 43.0999 32.7998 46.5 32.7998 50.7V56C32.7998 60.9 35.7998 65.2 40.2998 67L49.9998 70.8C50.7998 71.9 55.0998 75.2999 57.4998 77.0999C58.4998 77.8999 59.0998 79.1 59.0998 80.3V83.5C59.0998 84.4 58.3998 85.1999 57.3998 85.1999H53.3998C51.4998 85.1999 49.9998 86.6999 49.9998 88.5999V92.1999C49.9998 92.8999 50.5998 93.5 51.2998 93.5H76.9998C77.6998 93.5 78.2998 92.8999 78.2998 92.1999V88.5999C78.2998 86.6999 76.7998 85.1999 74.8998 85.1999H70.8998C69.9998 85.1999 69.1998 84.5 69.1998 83.5V80.3C69.1998 79 69.7998 77.7999 70.7998 77.0999C73.1998 75.2999 77.4998 71.9 78.2998 70.8L87.9998 67C92.4998 65.2 95.4998 60.8 95.4998 56V50.7C95.4998 46.5 92.0998 43.0999 87.8998 43.0999ZM42.1998 62.0999C39.6998 61.0999 38.0998 58.7 38.0998 56V50.7C38.0998 49.5 39.0998 48.4 40.2998 48.4H44.6998V55C44.6998 58 45.1998 60.8999 46.0998 63.5999L42.1998 62.0999ZM73.7998 55.7L69.9998 59.2999C69.7998 59.3999 69.7998 59.7 69.7998 59.9L70.6998 65C70.8998 66 69.7998 66.8 68.8998 66.3L64.2998 63.8C64.0998 63.7 63.8998 63.7 63.6998 63.8L59.0998 66.3C58.1998 66.8 57.1998 66 57.2998 65L58.1998 59.9C58.1998 59.7 58.1998 59.4999 57.9998 59.2999L54.2998 55.7C53.5998 55 53.9998 53.7999 54.9998 53.5999L60.0998 52.9C60.2998 52.9 60.4998 52.7 60.5998 52.5L62.7998 47.7999C63.1998 46.8999 64.4998 46.8999 64.9998 47.7999L67.1998 52.5C67.2998 52.7 67.4998 52.8 67.6998 52.9L72.7998 53.5999C74.0998 53.7999 74.4998 55 73.7998 55.7ZM90.1998 56C90.1998 58.7 88.5998 61.0999 86.0998 62.0999L82.0998 63.6999C82.9998 60.9999 83.4998 58.0999 83.4998 55.0999V48.5H87.8998C89.0998 48.5 90.1998 49.4999 90.1998 50.7999V56Z"
                        fill="white" />
                </svg>

                <div class="caixa">
                    <p>Quiz 2</p>
                </div>
            </button>


            <button class="select-aside" id="quiz3" onclick="iniciarQuiz(listaDeQuestoes3, 'quiz1','quiz2',3)">
                <svg width="92" height="90" viewBox="0 0 92 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M84.1328 62.5661C85.0312 67.5505 86.3047 73.1051 87.9531 76.8671H89.7187C90.7968 76.8671 91.6718 77.7421 91.6718 78.8202V87.0624C91.6718 88.1405 90.7968 89.0155 89.7187 89.0155H63.1137C62.0356 89.0155 61.1606 88.1405 61.1606 87.0624V80.953H2.24656C1.16846 80.953 0.293457 80.078 0.293457 78.9999V2.90991C0.293457 1.83181 1.16846 0.956813 2.24656 0.956813H9.34816C10.4263 0.956813 11.3013 1.83181 11.3013 2.90991C11.3013 3.98801 10.4263 4.86301 9.34816 4.86301H4.19976V77.047H62.2938C62.5438 76.9298 62.8211 76.8673 63.1141 76.8673H64.8797C65.2586 76.0079 65.614 75.0548 65.9539 74.0353H8.90687C7.82877 74.0353 6.95377 73.1603 6.95377 72.0822V9.82822C6.95377 8.75012 7.82877 7.87512 8.90687 7.87512H71.1609C72.239 7.87512 73.114 8.75012 73.114 9.82822V34.0512C73.9968 33.8051 74.9148 33.6528 75.864 33.6098V4.85981H14.817C13.7389 4.85981 12.8639 3.98481 12.8639 2.90671C12.8639 1.82861 13.7389 0.953613 14.817 0.953613H77.817C78.8951 0.953613 79.7701 1.82861 79.7701 2.90671V34.0587C81.8482 34.6486 83.6998 35.7735 85.1685 37.2696C85.9224 38.0391 85.9107 39.2774 85.1411 40.0313C84.3716 40.7852 83.1333 40.7735 82.3794 40.004C81.6372 39.2462 80.7544 38.629 79.77 38.1993C78.7427 37.7501 77.6098 37.5 76.4184 37.5C76.2309 37.5 76.0473 37.5079 75.8637 37.5196C71.5121 37.8047 68.0707 41.4298 68.0707 45.8516C68.0707 48.3594 69.1801 50.6094 70.9301 52.1407H81.9101C83.664 50.6095 84.7695 48.3595 84.7695 45.8516C84.7695 45.168 84.6875 44.5078 84.5351 43.8711C84.2812 42.8242 84.9219 41.7656 85.9688 41.5117C87.0157 41.2578 88.0743 41.8984 88.3282 42.9453C88.5547 43.875 88.6758 44.8476 88.6758 45.8476C88.6758 48.4023 87.8907 50.7773 86.5508 52.7421C86.8828 53.0936 87.0899 53.5663 87.0899 54.0898V60.6093C87.0899 61.6874 86.2149 62.5624 85.1368 62.5624H84.1368L84.1328 62.5661ZM65.9258 53.2809H52.3598V70.1289H67.0828C67.7156 67.6601 68.2547 65.043 68.7 62.5664H67.7C66.6219 62.5664 65.7469 61.6914 65.7469 60.6133V54.0938C65.7469 53.8048 65.8094 53.5274 65.9226 53.2813L65.9258 53.2809ZM72.625 62.5661C71.7734 67.3395 70.5898 72.7651 69.0742 76.8671H83.7582C82.2426 72.7655 81.059 67.3437 80.2074 62.5661H72.625ZM83.18 58.6599V56.0466H69.653V58.6599H83.18ZM31.61 53.281V70.129H48.458V53.281H31.61ZM69.208 35.945V32.527H52.36V49.375H64.676C64.34 48.2578 64.1603 47.0742 64.1603 45.8516C64.1603 41.7813 66.1486 38.1758 69.2033 35.9454L69.208 35.945ZM27.704 53.281H10.856V70.129H27.704V53.281ZM52.36 28.625H69.208V11.777H52.36V28.625ZM48.4538 28.625V11.777H31.6058V28.625H48.4538ZM27.7038 11.777H10.8558V28.625H27.7038V11.777ZM86.7198 80.769H65.0638V80.9487V85.1049H87.7668V80.769H86.716L86.7198 80.769ZM27.7038 32.527H10.8558V49.375H27.7038V32.527ZM48.4538 32.527H31.6058V49.375H48.4538V32.527Z"
                        fill="white" />
                </svg>

                <div class="caixa">
                    <p>Quiz 3 </p>
                </div>
            </button>

            <button class="select-aside" onclick="mostrarHistorico()">
                <svg class="icone" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision"
                    text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd"
                    clip-rule="evenodd" viewBox="0 0 512 513.11">
                    <path fill-rule="nonzero"
                        d="M210.48 160.8c0-14.61 11.84-26.46 26.45-26.46s26.45 11.85 26.45 26.46v110.88l73.34 32.24c13.36 5.88 19.42 21.47 13.54 34.82-5.88 13.35-21.47 19.41-34.82 13.54l-87.8-38.6c-10.03-3.76-17.16-13.43-17.16-24.77V160.8zM5.4 168.54c-.76-2.25-1.23-4.64-1.36-7.13l-4-73.49c-.75-14.55 10.45-26.95 25-27.69 14.55-.75 26.95 10.45 27.69 25l.74 13.6a254.258 254.258 0 0136.81-38.32c17.97-15.16 38.38-28.09 61.01-38.18 64.67-28.85 134.85-28.78 196.02-5.35 60.55 23.2 112.36 69.27 141.4 132.83.77 1.38 1.42 2.84 1.94 4.36 27.86 64.06 27.53 133.33 4.37 193.81-23.2 60.55-69.27 112.36-132.83 141.39a26.24 26.24 0 01-12.89 3.35c-14.61 0-26.45-11.84-26.45-26.45 0-11.5 7.34-21.28 17.59-24.92 7.69-3.53 15.06-7.47 22.09-11.8.8-.66 1.65-1.28 2.55-1.86 11.33-7.32 22.1-15.7 31.84-25.04.64-.61 1.31-1.19 2-1.72 20.66-20.5 36.48-45.06 46.71-71.76 18.66-48.7 18.77-104.46-4.1-155.72l-.01-.03C418.65 122.16 377.13 85 328.5 66.37c-48.7-18.65-104.46-18.76-155.72 4.1a203.616 203.616 0 00-48.4 30.33c-9.86 8.32-18.8 17.46-26.75 27.29l3.45-.43c14.49-1.77 27.68 8.55 29.45 23.04 1.77 14.49-8.55 27.68-23.04 29.45l-73.06 9c-13.66 1.66-26.16-7.41-29.03-20.61zM283.49 511.5c20.88-2.34 30.84-26.93 17.46-43.16-5.71-6.93-14.39-10.34-23.29-9.42-15.56 1.75-31.13 1.72-46.68-.13-9.34-1.11-18.45 2.72-24.19 10.17-12.36 16.43-2.55 39.77 17.82 42.35 19.58 2.34 39.28 2.39 58.88.19zm-168.74-40.67c7.92 5.26 17.77 5.86 26.32 1.74 18.29-9.06 19.97-34.41 3.01-45.76-12.81-8.45-25.14-18.96-35.61-30.16-9.58-10.2-25.28-11.25-36.11-2.39a26.436 26.436 0 00-2.55 38.5c13.34 14.2 28.66 27.34 44.94 38.07zM10.93 331.97c2.92 9.44 10.72 16.32 20.41 18.18 19.54 3.63 36.01-14.84 30.13-33.82-4.66-15-7.49-30.26-8.64-45.93-1.36-18.33-20.21-29.62-37.06-22.33C5.5 252.72-.69 262.86.06 274.14c1.42 19.66 5.02 39 10.87 57.83z" />
                </svg>
                <div class="caixa">
                    <p>Histórico</p>
                </div>
            </button>

            <button class="select-aside" onclick="window.location = 'index.html'">
                <svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">

                    <g id="SVGRepo_bgCarrier" stroke-width="0" />

                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />

                    <g id="SVGRepo_iconCarrier">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M9.70725 2.4087C9 3.03569 9 4.18259 9 6.4764V17.5236C9 19.8174 9 20.9643 9.70725 21.5913C10.4145 22.2183 11.4955 22.0297 13.6576 21.6526L15.9864 21.2465C18.3809 20.8288 19.5781 20.62 20.2891 19.7417C21 18.8635 21 17.5933 21 15.0529V8.94711C21 6.40671 21 5.13652 20.2891 4.25826C19.5781 3.37999 18.3809 3.17118 15.9864 2.75354L13.6576 2.34736C11.4955 1.97026 10.4145 1.78171 9.70725 2.4087ZM12 10.1686C12.4142 10.1686 12.75 10.52 12.75 10.9535V13.0465C12.75 13.48 12.4142 13.8314 12 13.8314C11.5858 13.8314 11.25 13.48 11.25 13.0465V10.9535C11.25 10.52 11.5858 10.1686 12 10.1686Z"
                            fill="#000" />
                        <path
                            d="M7.54717 4.5C5.48889 4.503 4.41599 4.54826 3.73223 5.23202C3 5.96425 3 7.14276 3 9.49979V14.4998C3 16.8568 3 18.0353 3.73223 18.7676C4.41599 19.4513 5.48889 19.4966 7.54717 19.4996C7.49985 18.8763 7.49992 18.1557 7.50001 17.3768V6.6227C7.49992 5.84388 7.49985 5.1233 7.54717 4.5Z"
                            fill="#000" />
                    </g>
                </svg>
                <div class="caixa">
                    <p>Sair</p>
                </div>
            </button>
        </ul>
    </aside>
    <main id="usarquiz" class="inicioQuiz">
        <div class="textosQuiz">
            <h1>Desafie sua mente no tabuleiro do saber!</h1>
            <p>Responda aos quizes e descubra o quanto você sabe sobre xadrez.</p>
        </div>
        <div class="imagemQuiz">
            <img src="assets/img/pecas_quiz.svg" alt="">
        </div>
    </main>
    <main id="quiz">
        <button onclick="finalizar()" class="btnConcluir">Desistir</button>
        <div class="aviso" id="aviso1">
            <div class="alerta_icone">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" height="24" fill="none">
                    <path fill="white"
                        d="m13 13h-2v-6h2zm0 4h-2v-2h2zm-1-15c-1.3132 0-2.61358.25866-3.82683.7612-1.21326.50255-2.31565 1.23915-3.24424 2.16773-1.87536 1.87537-2.92893 4.41891-2.92893 7.07107 0 2.6522 1.05357 5.1957 2.92893 7.0711.92859.9286 2.03098 1.6651 3.24424 2.1677 1.21325.5025 2.51363.7612 3.82683.7612 2.6522 0 5.1957-1.0536 7.0711-2.9289 1.8753-1.8754 2.9289-4.4189 2.9289-7.0711 0-1.3132-.2587-2.61358-.7612-3.82683-.5026-1.21326-1.2391-2.31565-2.1677-3.24424-.9286-.92858-2.031-1.66518-3.2443-2.16773-1.2132-.50254-2.5136-.7612-3.8268-.7612z">
                    </path>
                </svg>
            </div>
            <div class="alerta_texto">Selecione uma alternativa</div>
        </div>

        <div id="pontuacaoEJogo">
            <div id="pontuacao" class="flex-colunar width-fit-content border-primary">
                <div style="display: none;" id="pontuacaoDuranteJogo" class="flex-colunar padding-8">
                    <span class="width-fit-content">Quantidade de acertos: <span id="spanCertas">0</span></span>
                    <span class="width-fit-content">Quantidade de erros: <span id="spanErradas">0</span></span>
                </div>
                <div id="pontuacaoFinalJogo" class="flex-colunar padding-8">
                    <span id="pontuacaoFinal" class="width-fit-content">Pontuação Final:
                        <span id="spanPontuacaoFinal"></span>/10
                    </span>
                    <span id="msgFinal" class="width-fit-content">***</span>
                </div>
            </div>

            <div id="jogo" class="width-fit-content flex-colunar border-secondary">

                <div id="infoQuestao" class="padding-8">
                    <span>Questão <span id="spanNumeroDaQuestaoAtual"></span> de <span id="qtdQuestoes"></span></span>
                </div>

                <div style="display: flex; justify-content: space-between;">
                    <p id="tituloQuiz">Tema: </p>
                    <p class="textao">Dificuldade: <span id="dificuldade"></span></p>
                </div>

                <div id="perguntaDaQuestaoAtual" class="padding-8">
                    <span id="spanQuestaoExibida" class="text-bold"></span>
                </div>

                <div id="opcoes" class="flex-colunar padding-8">
                    <span>
                        <input style="display: none;" type="radio" id="primeiraOpcao" name="option" class="radio"
                            value="alternativaA" />
                        <label id="labelOpcaoUm" for="primeiraOpcao" class="option"><span class="bolinha">A</span>ㅤ<span
                                id="testetexto1"></span></label>
                    </span>
                    <span>
                        <input style="display: none;" type="radio" id="segundaOpcao" name="option" class="radio"
                            value="alternativaB" />
                        <label id="labelOpcaoDois" for="segundaOpcao" class="option"><span
                                class="bolinha">B</span>ㅤ<span id="testetexto2"></span></label>
                    </span>
                    <span>
                        <input style="display: none;" type="radio" id="terceiraOpcao" name="option" class="radio"
                            value="alternativaC" />
                        <label id="labelOpcaoTres" for="terceiraOpcao" class="option"><span
                                class="bolinha">C</span>ㅤ<span id="testetexto3"></span></label>
                    </span>
                    <span>
                        <input style="display: none;" type="radio" id="quartaOpcao" name="option" class="radio"
                            value="alternativaD" />
                        <label id="labelOpcaoQuatro" for="quartaOpcao" class="option""><span class="
                            bolinha">D</span>ㅤ<span id="testetexto4"></span></label>
                    </span>
                </div>

                <div id="botoes" class="flex-colunar padding-8">
                    <button class="botoes" onclick="submeter()" id="btnSubmeter">Checar resposta</button>
                    <button class="botoes" onclick="avancar()" id="btnProx" style="display: none;" disabled>Próxima
                        questão</button>
                </div>
            </div>
        </div>
    </main>
    <main id="historico" style="height: 100vh; width: 84vw;display: none;">
        <div class="div_pai">
            <h1 class="titulo">HISTÓRICO</h1>

            <div class="scroll_historico">
                <section>
                    <div class="legenda">
                        <span class="historicoQuiz">QUIZ</span>
                        <span class="historicoAcertos">ACERTOS</span>
                        <span class="historicoErros">ERROS</span>
                        <span class="historicoTempo">TEMPO</span>
                        <span class="historicoPorcentagem">PORCENTAGEM</span>
                        <span class="historicoRealizacao">REALIZAÇÃO</span>
                    </div>
                    <div class="scroll" id="scroll">
                    </div>
                </section>
            </div>
        </div>
    </main>
</body>

</html>
<script>

    function mostrarHistorico() {
        document.getElementById('historico').style.display = 'flex'
        document.getElementById('usarquiz').style.display = 'none'
        document.getElementById('quiz').style.display = 'none';
        exibirHistorico()
    }

    var arredondada = 0
    var escolhido = ''
    var idQuiz = ''
    const listaDeQuestoes1 = [
        {
            pergunta: "Qual mês tem teste2?",
            alternativaA: "Janeiro",
            alternativaB: "Dezembro",
            alternativaC: "Junho",
            alternativaD: "Agosto",
            alternativaCorreta: "alternativaC"
        },

        {
            pergunta: "Quantas horas tem em um dia?",
            alternativaA: "30 horas",
            alternativaB: "38 horas",
            alternativaC: "48 horas",
            alternativaD: "24 horas",
            alternativaCorreta: "alternativaD"
        }
    ]

    const listaDeQuestoes2 = [

        {
            pergunta: "Quem foi o primeiro campeão mundial oficial de xadrez reconhecido pela FIDE?",
            alternativaA: "Garry Kasparov",
            alternativaB: "Wilhelm Steinitz",
            alternativaC: "Emanuel Lasker",
            alternativaD: "Bobby Fischer",
            alternativaCorreta: "alternativaB"
        },

        {
            pergunta: "Em que ano Bobby Fischer derrotou Boris Spassky para se tornar campeão mundial?",
            alternativaA: "1966",
            alternativaB: "1969",
            alternativaC: "1972",
            alternativaD: "1975",
            alternativaCorreta: "alternativaC"
        },

        {
            pergunta: "Qual desses campeões é conhecido por seu estilo agressivo e criativo?",
            alternativaA: "Anatoly Karpov",
            alternativaB: "Magnus Carlsen",
            alternativaC: "Garry Kasparov",
            alternativaD: "Vladimir Kramnik",
            alternativaCorreta: "alternativaC"
        },

        {
            pergunta: "Quem tirou o título de campeão mundial de Garry Kasparov em 2000?",
            alternativaA: "Kramnik",
            alternativaB: "Anand",
            alternativaC: "Topalov",
            alternativaD: "Leko",
            alternativaCorreta: "alternativaA"
        },

        {
            pergunta: "Qual desses campeões mundiais é norueguês?",
            alternativaA: "Kramnik",
            alternativaB: "Magnus Carlsen",
            alternativaC: "Caruana",
            alternativaD: "Spassky",
            alternativaCorreta: "alternativaB"
        },

        {
            pergunta: "A famosa partida 'O Jogo do Século', jogada por Fischer aos 13 anos, foi contra:",
            alternativaA: "Boris Spassky",
            alternativaB: "Donald Byrne",
            alternativaC: "Paul Morphy",
            alternativaD: "Bent Larsen",
            alternativaCorreta: "alternativaB"
        },

        {
            pergunta: "José Raúl Capablanca era natural de qual país?",
            alternativaA: "México",
            alternativaB: "Argentina",
            alternativaC: "Cuba",
            alternativaD: "Espanha",
            alternativaCorreta: "alternativaC"
        },

        {
            pergunta: "Qual foi o principal rival de Karpov durante os anos 1980?",
            alternativaA: "Bobby Fischer",
            alternativaB: "Tigran Petrosian",
            alternativaC: "Garry Kasparov",
            alternativaD: "Magnus Carlsen",
            alternativaCorreta: "alternativaC"
        },

        {
            pergunta: "Em qual país nasceu o campeão mundial Viswanathan Anand?",
            alternativaA: "Sri Lanka",
            alternativaB: "Índia",
            alternativaC: "Paquistão",
            alternativaD: "Nepal",
            alternativaCorreta: "alternativaB"
        },

        {
            pergunta: "A final do Campeonato Mundial de 2021 foi entre Magnus Carlsen e:",
            alternativaA: "Ian Nepomniachtchi",
            alternativaB: "Ding Liren",
            alternativaC: "Hikaru Nakamura",
            alternativaD: "Wesley So",
            alternativaCorreta: "alternativaA"
        }
    ];

    const listaDeQuestoes3 = [

        {
            pergunta: "Qual é a sequência inicial da Defesa Siciliana?",
            alternativaA: "1.e4 e5",
            alternativaB: "1.e4 c5",
            alternativaC: "1.d4 d5",
            alternativaD: "1.c4 e5",
            alternativaCorreta: "alternativaB"
        },

        {
            pergunta: "O Gambito da Dama começa com qual sequência de lances?",
            alternativaA: "1.e4 e5 2.Nf3 Nc6",
            alternativaB: "1.d4 d5 2.c4",
            alternativaC: "1.e4 c6",
            alternativaD: "1.Nf3 d5 2.g3",
            alternativaCorreta: "alternativaB"
        },

        {
            pergunta: "Qual é o principal objetivo do lance ...e5 nas aberturas para as pretas?",
            alternativaA: "Fortalecer o flanco da dama",
            alternativaB: "Liberar o bispo de casas brancas",
            alternativaC: "Atacar o rei adversário",
            alternativaD: "Evitar o roque",
            alternativaCorreta: "alternativaB"
        },

        {
            pergunta: "A 'cravada' é uma tática em que:",
            alternativaA: "O rei é colocado em xeque duplo",
            alternativaB: "Uma peça não pode se mover sem expor uma peça mais valiosa",
            alternativaC: "Se sacrifica a dama",
            alternativaD: "Se promove um peão",
            alternativaCorreta: "alternativaB"
        },

        {
            pergunta: "A Defesa Caro-Kann começa com:",
            alternativaA: "1.e4 e5",
            alternativaB: "1.e4 c6",
            alternativaC: "1.d4 Nf6",
            alternativaD: "1.c4 c5",
            alternativaCorreta: "alternativaB"
        },

        {
            pergunta: "O termo 'garfo' no xadrez refere-se a:",
            alternativaA: "Um xeque com dois peões",
            alternativaB: "Um lance que captura duas torres",
            alternativaC: "Um ataque duplo com uma peça",
            alternativaD: "Um sacrifício posicional",
            alternativaCorreta: "alternativaC"
        },

        {
            pergunta: "A abertura Ruy Lopez também é conhecida como:",
            alternativaA: "Abertura Italiana",
            alternativaB: "Abertura Espanhola",
            alternativaC: "Defesa Francesa",
            alternativaD: "Abertura Inglesa",
            alternativaCorreta: "alternativaB"
        },

        {
            pergunta: "Qual peça geralmente executa o 'raio-x' em uma tática de ataque?",
            alternativaA: "Cavalo",
            alternativaB: "Torre",
            alternativaC: "Rei",
            alternativaD: "Peão",
            alternativaCorreta: "alternativaB"
        },

        {
            pergunta: "Em finais de torre, qual fator é mais importante?",
            alternativaA: "Número de peças capturadas",
            alternativaB: "Domínio da diagonal",
            alternativaC: "Atividade da torre e rei centralizado",
            alternativaD: "Trocar todas as peças possíveis",
            alternativaCorreta: "alternativaC"
        },

        {
            pergunta: "O conceito de 'zugzwang' significa:",
            alternativaA: "Ataque surpresa com peões",
            alternativaB: "Situação em que qualquer lance piora a posição",
            alternativaC: "Xeque-mate inevitável",
            alternativaD: "Controle das casas centrais",
            alternativaCorreta: "alternativaB"
        }
    ];


    // variáveis globais    
    var idusuario = sessionStorage.ID_USUARIO
    let numeroDaQuestaoAtual = 0
    let pontuacaoFinal = 0
    let tentativaIncorreta = 0
    let certas = 0
    let erradas = 0
    let quantidadeDeQuestoes = 0
    var contador = 0
    var tempo = 0
    var minutos = 0

    function onloadEsconder() {
        // telinhas de questões
        document.getElementById('pontuacao').style.display = "none"
        document.getElementById('jogo').style.display = "none"
    }

    function iniciarQuiz(quiz, escondido1, escondido2, idDoquiz) {
        document.getElementById('historico').style.display = 'none'
        document.getElementById('quiz').style.display = 'flex'
        tempo = setInterval(() => {
            // if (contador == 60) {
            //     minutos++
            //     contador = 0
            // } else {
            contador++;
            // }
            console.log("Contador:", contador);
        }, 1000); // 1000 ms = 1 segundo


        document.getElementById('usarquiz').style.display = "none"
        document.getElementById(escondido1).style.visibility = "hidden"
        document.getElementById(escondido2).style.visibility = "hidden"

        escolhido = quiz
        idQuiz = idDoquiz

         if (idQuiz == 1) {
            tituloQuiz.innerHTML += "A história do xadrez"
            dificuldade.innerHTML = "Fácil"
            document.getElementById('dificuldade').style.color = "green"

        } else if (idQuiz == 2) {
            tituloQuiz.innerHTML += "Campeões Mundiais de Xadrez"
            dificuldade.innerHTML = "Médio"
            document.getElementById('dificuldade').style.color = "rgb(232, 205, 2)"
        } else if (idQuiz == 3) {
            tituloQuiz.innerHTML += "Aberturas e Táticas de Xadrez"
            dificuldade.innerHTML = "Difícil"
            document.getElementById('dificuldade').style.color = "red"
        }

        quantidadeDeQuestoes = escolhido.length

        document.getElementById('jogo').style.display = "flex"

        document.getElementById('qtdQuestoes').innerHTML = quantidadeDeQuestoes

        preencherHTMLcomQuestaoAtual(0)

        // btnSubmeter.disabled = false
        btnProx.disabled = true
        // btnConcluir.disabled = true
    }

    function preencherHTMLcomQuestaoAtual(index) {
        habilitarAlternativas(true)
        const questaoAtual = escolhido[index]
        numeroDaQuestaoAtual = index
        console.log("questaoAtual")
        console.log(questaoAtual)
        document.getElementById("spanNumeroDaQuestaoAtual").innerHTML = Number(index) + 1 // ajustando porque o index começa em 0
        document.getElementById("spanQuestaoExibida").innerHTML = questaoAtual.pergunta;
        document.getElementById("testetexto1").innerHTML = questaoAtual.alternativaA;
        document.getElementById("testetexto2").innerHTML = questaoAtual.alternativaB;
        document.getElementById("testetexto3").innerHTML = questaoAtual.alternativaC;
        document.getElementById("testetexto4").innerHTML = questaoAtual.alternativaD;
    }

    function submeter() {
        const options = document.getElementsByName("option"); // recupera alternativas no html
        document.getElementById('aviso1').style.display = 'none'

        let hasChecked = false
        for (let i = 0; i < options.length; i++) {
            if (options[i].checked) {
                hasChecked = true
                break
            }
        }

        if (!hasChecked) {
            document.getElementById('aviso1').style.display = 'flex'
        } else {
            btnProx.disabled = false

            habilitarAlternativas(false)
            checarResposta()
        }
    }

    function habilitarAlternativas(trueOrFalse) {
        let opcaoEscolhida = trueOrFalse ? false : true

        primeiraOpcao.disabled = opcaoEscolhida
        segundaOpcao.disabled = opcaoEscolhida
        terceiraOpcao.disabled = opcaoEscolhida
        quartaOpcao.disabled = opcaoEscolhida
    }

    function avancar() {
        document.getElementById('btnSubmeter').style.display = 'flex';
        document.getElementById('btnProx').style.display = 'none';

        desmarcarRadioButtons()

        if (numeroDaQuestaoAtual < quantidadeDeQuestoes - 1) {
            preencherHTMLcomQuestaoAtual(numeroDaQuestaoAtual)
        } else if (numeroDaQuestaoAtual == quantidadeDeQuestoes - 1) {
            preencherHTMLcomQuestaoAtual(numeroDaQuestaoAtual)
        } else {
            finalizarJogo()
        }
        limparCoresBackgroundOpcoes()
    }

    function tentarNovamente() {
        window.location.reload()
    }

    function checarResposta() {
        const questaoAtual = escolhido[numeroDaQuestaoAtual]; // questão atual 
        const respostaQuestaoAtual = questaoAtual.alternativaCorreta; // qual é a resposta correta da questão atual

        const options = document.getElementsByName("option"); // recupera alternativas no html

        let alternativaCorreta = null; // variável para armazenar a alternativa correta

        options.forEach((option) => {
            if (option.value === respostaQuestaoAtual) {
                alternativaCorreta = option.labels[0].id;
            }
        });

        options.forEach((option) => {
            if (option.checked === true && option.value === respostaQuestaoAtual) {
                document.getElementById(alternativaCorreta).classList.add("text-success-with-bg");
                pontuacaoFinal++;
                certas++;
                document.getElementById("spanCertas").innerHTML = certas;
                numeroDaQuestaoAtual++;
            } else if (option.checked && option.value !== respostaQuestaoAtual) {
                const wrongLabelId = option.labels[0].id;

                document.getElementById(wrongLabelId).classList.add("text-danger-with-bg");
                document.getElementById(alternativaCorreta).classList.add("text-success-with-bg");
                tentativaIncorreta++;
                erradas++;
                document.getElementById("spanErradas").innerHTML = erradas;
                numeroDaQuestaoAtual++;
            }
        });
        document.getElementById('btnSubmeter').style.display = 'none';
        document.getElementById('btnProx').style.display = 'flex';
        options.forEach(option => option.checked = false);
    }


    function limparCoresBackgroundOpcoes() {
        const options = document.getElementsByName("option");
        options.forEach((option) => {
            document.getElementById(option.labels[0].id).classList.remove("text-danger-with-bg")
            document.getElementById(option.labels[0].id).classList.remove("text-success-with-bg")
        })
    }

    function desmarcarRadioButtons() {
        const options = document.getElementsByName("option");
        for (let i = 0; i < options.length; i++) {
            options[i].checked = false;
        }
    };

    var porcentagemFinalDeAcertos = 0
    function finalizarJogo() {
        document.getElementById('pontuacao').style.display = "flex"
        document.getElementById('jogo').style.display = "none"
        let textoParaMensagemFinal = null
        let classComCoresParaMensagemFinal = null
        porcentagemFinalDeAcertos = pontuacaoFinal / quantidadeDeQuestoes
        clearInterval(tempo);

        

        textoParaMensagemFinal = `
        <br>Você acertou ${Math.round(porcentagemFinalDeAcertos * 100)}% das questões. 
        <br><canvas id="GraficoResultado" width="300" height="300"></canvas>
        <br><button class="botoes" onclick="tentarNovamente()">Tentar novamente</button>
    `

        const msgFinal = document.getElementById('msgFinal')
        msgFinal.innerHTML = textoParaMensagemFinal
        msgFinal.classList.add(classComCoresParaMensagemFinal)

        // Espera o canvas estar no DOM
        setTimeout(() => {
            const ctx = document.getElementById('GraficoResultado').getContext('2d')
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Acertos', 'Erros'],
                    datasets: [{
                        label: 'Fez Quiz',
                        data: [pontuacaoFinal, quantidadeDeQuestoes - pontuacaoFinal],
                        backgroundColor: ['#2ecc71', '#e74c3c'],
                        borderWidth: 0
                    }]
                },
                options: {
                    circumference: 57 * Math.PI,
                    rotation: 86 * Math.PI,
                    responsive: false,
                    plugins: {
                        datalabels: {
                            color: '#fff',
                            font: {
                                weight: 'bold',
                                size: 14
                            },
                            formatter: (value) => `${value}`
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                },
                plugins: [ChartDataLabels]
            });
        }, 0);

        document.getElementById('spanPontuacaoFinal').innerHTML = pontuacaoFinal
        document.getElementById('jogo').classList.add("text-new-gray")
        btnProx.disabled = true
        arredondada = Math.round(porcentagemFinalDeAcertos * 100)

        guardar()
    }


    function finalizar() {
        window.location.reload()
    }


    function guardar() {
        // Enviando o valor da nova input
        fetch("/quiz/guardar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                quizServer: idQuiz,
                certasServer: certas,
                erradasServer: erradas,
                usuarioServer: idusuario,
                contadorServer: contador,
                porcentagemServer: arredondada
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    console.log('resposta enviada ao banco');
                } else {
                    throw "Houve um erro ao tentar realizar o cadastro!";
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });
        return false;
    }

    function exibirHistorico() {
        fetch(`/historico/listar/${idusuario}`, {
            method: 'GET'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao buscar sensores");
                }
                return response.json();
            })
            // .then(sensores => {
            .then(historicos => {
                const container = document.getElementById("scroll");
                container.innerHTML = "";

                historicos.forEach(historico => {
                    container.innerHTML += `<div class="dados">
                            <span class="historicoQuiz">${historico.idquiz}</span>
                            <span class="historicoAcertos">${historico.acertos}</span>
                            <span class="historicoErros">${historico.erros}</span>
                            <span class="historicoTempo">${historico.tempo}</span>
                            <span class="historicoPorcentagem">${historico.porcentagem}%</span>
                            <span class="historicoRealizacao">${new Date(historico.dtRealizacao).toLocaleDateString("pt-BR")}</span>
                        </div>`


                    console.log(historico.tempo)
                });
            })
            .catch(error => {
                console.error("Erro ao buscar sensores:", error);
            });
    }

</script>